<h1 class="h3 mb-0 text-gray-800">Schema</h1>
<div class="p-2">
  <div class="row">
    <div class="col">
      <div class="app-modal-body">
        <div class="row justify-content-md-center p-2">
          <span>Schema</span>
        </div>
        <div class="form-group row">
          <label for="Title" class="col-sm-1 col-form-label">Title</label>
          <div class="col-sm-5">
            <input id="Title" class="form-control" name="schema.title"
                   [(ngModel)]='schema.title'>
          </div>
        </div>
        <div class="form-group row">
          <label for="Meta" class="col-sm-1 col-form-label">Meta</label>
          <div class="col-sm-5">
            <textarea id="Meta" class="form-control" name="schema.meta" rows="2" style="resize: none"
                      [(ngModel)]='schema.meta'></textarea>
          </div>
        </div>
        <perfect-scrollbar style="height: 250px" [config]="config">
          <ul class=" tree">
            <li>
              <button type="button" class="btn btn-light btn-sm" (click)="addKeyComponent.show('',null)">
                <i class="fa fa-plus" aria-hidden="true"></i>
              </button>
              <button type="button" class="btn btn-light btn-sm" (click)="delete(schema.keys,-1)">
                <i class="fa fa-minus" aria-hidden="true"></i>
              </button>
              Keys
              <ul class="tree" *ngFor="let key of schema.keys ; let iKey = index">
                <li>
                  <button type="button" class="btn btn-light btn-sm" (click)="addActionComponent.show(iKey+'',null)">
                    <i class="fa fa-plus" aria-hidden="true"></i>
                  </button>
                  <button type="button" class="btn btn-light btn-sm" (click)="delete(schema.keys,iKey)">
                    <i class="fa fa-minus" aria-hidden="true"></i>
                  </button>
                  <a (click)="addKeyComponent.show('',key)">{{key.keyType}} <span>{{key.keyEvent}}</span></a>
                  <ul *ngFor="let action of key.actions; let iAction = index">
                    <li>
                      <button type="button" class="btn btn-light btn-sm" (click)="delete(key.actions,iAction)">
                        <i class="fa fa-minus" aria-hidden="true"></i>
                      </button>
                      <a
                        (click)="addActionComponent.show('',action)">
                        {{action | resourceName  }}
                      </a>
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
        </perfect-scrollbar>
      </div>
    </div>
    <div class="col">
      <div class="form-group">
        <textarea class="form-control" rows="10" disabled="true" [ngModel]='schema | json'></textarea>
      </div>
      <div class="row p-3 float-right">
        <button (click)="save()" class="btn btn-primary">save</button>
      </div>
    </div>
  </div>
</div>
